<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Validate the raw QWA data — validate_QWA_data • rxs2tria</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate the raw QWA data — validate_QWA_data"><meta name="description" content="Initial checks to ensure the quality of the raw QWA data.
This function checks for the following issues:
undated images, i.e. YEAR is NA or in the future (raises error)
images without cell wall thickness estimates (raises warning, since CWT is
required for conifers but may not be available in the case of angiosperms)

"><meta property="og:description" content="Initial checks to ensure the quality of the raw QWA data.
This function checks for the following issues:
undated images, i.e. YEAR is NA or in the future (raises error)
images without cell wall thickness estimates (raises warning, since CWT is
required for conifers but may not be available in the case of angiosperms)

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rxs2tria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rxs2tria.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tria-db/rxs2tria/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Validate the raw QWA data</h1>
      <small class="dont-index">Source: <a href="https://github.com/tria-db/rxs2tria/blob/main/R/clean_raw_data.R" class="external-link"><code>R/clean_raw_data.R</code></a></small>
      <div class="d-none name"><code>validate_QWA_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Initial checks to ensure the quality of the raw QWA data.
This function checks for the following issues:</p><ul><li><p>undated images, i.e. YEAR is NA or in the future (raises error)</p></li>
<li><p>images without cell wall thickness estimates (raises warning, since CWT is
required for conifers but may not be available in the case of angiosperms)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">validate_QWA_data</span><span class="op">(</span><span class="va">QWA_data</span>, <span class="va">df_meta</span>, verbose_flags <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-qwa-data">QWA_data<a class="anchor" aria-label="anchor" href="#arg-qwa-data"></a></dt>
<dd><p>a list containing the cells and rings dataframes</p></dd>


<dt id="arg-df-meta">df_meta<a class="anchor" aria-label="anchor" href="#arg-df-meta"></a></dt>
<dd><p>a dataframe containing the metadata for the images
(spatial_resolution required for the incomplete innermost ring check)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>validated QWA_data (no changes to cells df, but added minimum required ring flag columns to rings df).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Next, the function identifies the rings with the following issues:</p><ul><li><p>incomplete rings</p></li>
<li><p>missing rings</p></li>
<li><p>duplicate rings</p></li>
</ul><p>Here, by <strong>incomplete</strong> rings we mean those at the inner (pith) and outer (bark)
boundaries of an images, which are cut-off by the image or slide border.
For these rings, some cells are usually recognized but the MRW can NOT
(outer) or NOT ACCURATELY (inner) be estimated. In some cases, the user may
have manually deleted the incomplete rings within ROXAS already, so it is not
a priori clear that all inner- and outermost rings per image are incomplete.</p>
<p>NOTE: Because ROXAS uses the outer ring boundary to estimate MRW, the
innermost ring generally has an MRW estimate (that is not based on the true
ring boundary but rather the image border), while the outermost ring has no
MRW value (except if it is actually complete either because it is at the
at the bark or because the user removed the incomplete ring manually in ROXAS).
Therefore, we perform an additional check on the border shape and position to
check if an innermost ring is incomplete,  while the outermost ring is flagged
as incomplete if and only if it has no MRW.</p>
<p><strong>Missing</strong> rings are for years that have no discernible ring in the image, but
have been manually added in ROXAS during cross-dating, leading to an entry
in the rings data but no corresponding no entries (cells) in the cells data.
This is usually the case with wedging rings.</p>
<p><strong>Duplicate</strong> rings are those that are present in multiple images due to them
overlapping. All years which have cells in more than one image are flagged
and ranked by their number of cells. The (complete) year with the highest
number of cells for each overlap is the one that would then usually be
selected for further analysis when building chronologies.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mara Naegelin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

