<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract the data structure from file names — get_structure_from_filenames • rxs2tria</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract the data structure from file names — get_structure_from_filenames"><meta name="description" content="Extract the hierarchical structure of the data (i.e., which images belong to
which slide, woodpiece, tree, site) from the given file names based on a
provided regex labeling pattern.
The extracted site, species, tree, woodpiece, slide, image identifiers are
joined by underscores to derive unique codes for each level of the data
structure for the subsequent calculations
(e.g. tree_code = {site}_{species}_{tree}).
The default pattern assumes that all file names follow the labeling scheme
{site}_{species}_{tree}{woodpiece}_{slide}_{image},
where {tree} is a two-character code, and {woodpiece} is optional, as
suggested in Fonti et al. (2025).
However, a different labeling pattern may be used, provided that it allows to
uniquely identify each image in the list of file names and is consistently
applied across all files.
Not all hierarchical components are mandatory in the pattern, as long as the
images can be uniquely identified (e.g. if exactly one woodpiece was
extracted per tree, there might not be a specific woodpiece identifier,
or if all data is from the same site, there might not be a site identifier
in the name).
Iff all images pertain to the same site and/or the same species, and these
components are not part of the labeling pattern, they may also be provided
via the site_label and species_code input parameters.
Here, species_code should follow the standard ITRDB species codes,
c.f. webapps.wsl.com/tria/#/about.
extract_data_structure() is a wrapper around get_structure_from_filenames()
that uses the list of ROXAS files from get_roxas_files() as input,
applies the hierarchy extraction to the image file names,
and adds the original file names to the resulting dataframe."><meta property="og:description" content="Extract the hierarchical structure of the data (i.e., which images belong to
which slide, woodpiece, tree, site) from the given file names based on a
provided regex labeling pattern.
The extracted site, species, tree, woodpiece, slide, image identifiers are
joined by underscores to derive unique codes for each level of the data
structure for the subsequent calculations
(e.g. tree_code = {site}_{species}_{tree}).
The default pattern assumes that all file names follow the labeling scheme
{site}_{species}_{tree}{woodpiece}_{slide}_{image},
where {tree} is a two-character code, and {woodpiece} is optional, as
suggested in Fonti et al. (2025).
However, a different labeling pattern may be used, provided that it allows to
uniquely identify each image in the list of file names and is consistently
applied across all files.
Not all hierarchical components are mandatory in the pattern, as long as the
images can be uniquely identified (e.g. if exactly one woodpiece was
extracted per tree, there might not be a specific woodpiece identifier,
or if all data is from the same site, there might not be a site identifier
in the name).
Iff all images pertain to the same site and/or the same species, and these
components are not part of the labeling pattern, they may also be provided
via the site_label and species_code input parameters.
Here, species_code should follow the standard ITRDB species codes,
c.f. webapps.wsl.com/tria/#/about.
extract_data_structure() is a wrapper around get_structure_from_filenames()
that uses the list of ROXAS files from get_roxas_files() as input,
applies the hierarchy extraction to the image file names,
and adds the original file names to the resulting dataframe."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rxs2tria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rxs2tria.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tria-db/rxs2tria/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract the data structure from file names</h1>
      <small class="dont-index">Source: <a href="https://github.com/tria-db/rxs2tria/blob/main/R/read_rxs_metadata.R" class="external-link"><code>R/read_rxs_metadata.R</code></a></small>
      <div class="d-none name"><code>get_structure_from_filenames.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extract the hierarchical structure of the data (i.e., which images belong to
which slide, woodpiece, tree, site) from the given file names based on a
provided regex labeling pattern.
The extracted site, species, tree, woodpiece, slide, image identifiers are
joined by underscores to derive unique codes for each level of the data
structure for the subsequent calculations
(e.g. <code>tree_code = {site}_{species}_{tree}</code>).</p>
<p>The default pattern assumes that all file names follow the labeling scheme
<code>{site}_{species}_{tree}{woodpiece}_{slide}_{image}</code>,
where <code>{tree}</code> is a two-character code, and <code>{woodpiece}</code> is optional, as
suggested in <a href="https://doi.org/10.3389/fpls.2016.00781" class="external-link">Fonti et al. (2025)</a>.</p>
<p>However, a different labeling pattern may be used, provided that it allows to
uniquely identify each image in the list of file names and is consistently
applied across all files.
Not all hierarchical components are mandatory in the pattern, as long as the
images can be uniquely identified (e.g. if exactly one woodpiece was
extracted per tree, there might not be a specific woodpiece identifier,
or if all data is from the same site, there might not be a site identifier
in the name).
Iff all images pertain to the same site and/or the same species, and these
components are not part of the labeling pattern, they may also be provided
via the <code>site_label</code> and <code>species_code</code> input parameters.
Here, <code>species_code</code> should follow the standard ITRDB species codes,
c.f. <a href="https://webapps.wsl.com/tria/#/about" class="external-link">webapps.wsl.com/tria/#/about</a>.</p>
<p><code>extract_data_structure()</code> is a wrapper around <code>get_structure_from_filenames()</code>
that uses the list of ROXAS files from <code><a href="get_roxas_files.html">get_roxas_files()</a></code> as input,
applies the hierarchy extraction to the image file names,
and adds the original file names to the resulting dataframe.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_structure_from_filenames</span><span class="op">(</span></span>
<span>  <span class="va">filenames</span>,</span>
<span>  pattern <span class="op">=</span></span>
<span>    <span class="st">"(?&lt;site&gt;[:alnum:]+)_(?&lt;species&gt;[:alnum:]+)_(?&lt;tree&gt;[:alnum:][:alnum:])(?&lt;woodpiece&gt;[:alnum:]*)_(?&lt;slide&gt;[:alnum:]+)_(?&lt;image&gt;[:alnum:]+)"</span>,</span>
<span>  site_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  species_code <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">extract_data_structure</span><span class="op">(</span></span>
<span>  <span class="va">files</span>,</span>
<span>  pattern <span class="op">=</span></span>
<span>    <span class="st">"(?&lt;site&gt;[:alnum:]+)_(?&lt;species&gt;[:alnum:]+)_(?&lt;tree&gt;[:alnum:][:alnum:])(?&lt;woodpiece&gt;[:alnum:]*)_(?&lt;slide&gt;[:alnum:]+)_(?&lt;image&gt;[:alnum:]+)"</span>,</span>
<span>  site_label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  species_code <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p>The labeling pattern followed by the file names, as a regex
with named groups.</p></dd>


<dt id="arg-site-label">site_label<a class="anchor" aria-label="anchor" href="#arg-site-label"></a></dt>
<dd><p>Optional site code to be used if it is not part of the
pattern, only if all images are from the same site.</p></dd>


<dt id="arg-species-code">species_code<a class="anchor" aria-label="anchor" href="#arg-species-code"></a></dt>
<dd><p>Optional species code to be used if it is not part of the
pattern, only if all images are from the same species.</p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>The list of vectors with ROXAS file names.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe containing the extracted data structure (plus the
original file names for <code>extract_data_structure()</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># with the default pattern ({site}_{species}_{tree}{woodpiece}_{slide}_{image})</span></span></span>
<span class="r-in"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"SITEA_PISY_01A_1_1.jpg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"SITEA_PISY_01A_1_2.jpg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"SITEA_PISY_01A_2_1.jpg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"SITEB_LASI_02A_1_1.jpg"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"SITEB_LASI_02B_1_1.jpg"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_structure_from_filenames</span><span class="op">(</span><span class="va">files</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   image_label     slide_label woodpiece_label tree_label species_code site_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> SITEA_PISY_01_… SITEA_PISY… SITEA_PISY_01_A SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> SITEA_PISY_01_… SITEA_PISY… SITEA_PISY_01_A SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> SITEA_PISY_01_… SITEA_PISY… SITEA_PISY_01_A SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> SITEB_LASI_02_… SITEB_LASI… SITEB_LASI_02_A SITEB_LAS… LASI         SITEB     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> SITEB_LASI_02_… SITEB_LASI… SITEB_LASI_02_B SITEB_LAS… LASI         SITEB     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: org_img_name &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># custom pattern of the form {tree}_{slide}_{image}</span></span></span>
<span class="r-in"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="st">"tree1_sl1_img1.jpg"</span>,</span></span>
<span class="r-in"><span> <span class="st">"tree1_sl2_img1.jpg"</span>,</span></span>
<span class="r-in"><span> <span class="st">"tree2_sl1_img1.jpg"</span>,</span></span>
<span class="r-in"><span> <span class="st">"tree2_sl1_img2.jpg"</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">pattern</span> <span class="op">&lt;-</span> <span class="st">"(?&lt;tree&gt;[:alnum:].+)_(?&lt;slide&gt;[:alnum:]+)_(?&lt;image&gt;[:alnum:]+)"</span></span></span>
<span class="r-in"><span> <span class="fu">get_structure_from_filenames</span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="va">files</span>, <span class="va">pattern</span>,</span></span>
<span class="r-in"><span>   site_label <span class="op">=</span> <span class="st">"SITEA"</span>, species_code <span class="op">=</span> <span class="st">"PISY"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   image_label     slide_label woodpiece_label tree_label species_code site_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> SITEA_PISY_tre… SITEA_PISY… SITEA_PISY_tre… SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> SITEA_PISY_tre… SITEA_PISY… SITEA_PISY_tre… SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> SITEA_PISY_tre… SITEA_PISY… SITEA_PISY_tre… SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> SITEA_PISY_tre… SITEA_PISY… SITEA_PISY_tre… SITEA_PIS… PISY         SITEA     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: org_img_name &lt;chr&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mara Naegelin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

